## 注解自动扫描装配

> 在注解自动装配的基础上,可以使用自动扫描,这样就不需要在配置文件中一个一个的配置 bean 了

### 使用四步骤

1. 导入注解依赖
2. 在配置文件中开启注解支持
3. 配置扫描包
4. 在需要注入的类或属性上添加注解

### 常用注解

> 下边这四个注解是等价的,都是在被 spring 扫描的类中使用的,从而不需要在配置文件中添加 bean 文件配置

| 注解        | 作用                                                                  |
| ----------- | --------------------------------------------------------------------- |
| @Component  | 自动扫描                                                              |
| @Service    | 在服务层(service)中使用                                               |
| @Controller | 在控制层(contoller)中使用                                             |
| @Repository | 在持久层(dao)中使用                                                   |
| @Scope      | 设置作用域,默认单例,同 bean,只是注解方式, scopeName 和 value 两个属性 |

### 配置文件

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">
  <!--注解的支持-->
  <context:annotation-config />
  <!--方式2: 自动扫描-->
  <!--
    context自动扫描机制：扫描具体的某一个包，只有扫描的包才能生效
    base-package：指定扫描的包
    resource-pattern：指定扫描的包的规则
    use-default-filters：是否使用默认的扫描规则，true表示使用，false表示不使用
    注意1：在包下的类中需要使用@Component注解才能生效
    注意2：如果使用@Component注解的话，下边的bean就都不需要了
  -->
  <context:component-scan base-package="com.haha.pojo"/>
</beans>
```

```java
// TestAutoSaoMiao
import com.haha.contoller.UserContoller;
import com.haha.dao.UserDao;
import com.haha.service.UserService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class TestAutoSaoMiao {
  public static void main(String[] args) {
    ApplicationContext context= new ClassPathXmlApplicationContext("applicationContext.xml");

    UserDao u1 = context.getBean("userDao", UserDao.class);
    System.out.println(u1.name); // UserDao

    UserContoller u2 = context.getBean("userContoller", UserContoller.class);
    System.out.println(u2.name); // UserContoller

    UserService u3 = context.getBean("userService", UserService.class);
    System.out.println(u3.name); // UserService
  }
}
```

```java
// UserDao
package com.haha.dao;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Repository;

@Repository // 可以直接替换成@Component
public class UserDao {
  @Value(value="UserDao")
  public String name;
  @Value("女") // @Value表示给属性赋值，也可以在set方法上使用
  public String age;
}

// UserContoller
package com.haha.contoller;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;

@Controller
public class UserContoller {
  @Value(value="UserContoller")
  public String name;
  @Value("女") // @Value表示给属性赋值，也可以在set方法上使用
  public String age;
}

// UserService
package com.haha.service;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

@Service
public class UserService {
  @Value(value="UserService")
  public String name;
  @Value("女") // @Value表示给属性赋值，也可以在set方法上使用
  public String age;
}
```

### xml 和注解

1. xml 适用于任何场景,维护的时候简单
2. 注解,只能在当前类中使用,其他的类获取不到,所以在 spring 项目中很多还是使用 xml
3. xml 和注解可以混合使用,xml 来管理 bean,用注解来解决属性注入的问题
4. 在后续的 springboot 项目中,都是使用注解,因为注解更加方便
