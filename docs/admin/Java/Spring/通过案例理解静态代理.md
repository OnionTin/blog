## 通过案例理解静态代理

> 拿租房子举例，有四种角色：租客(客户)、中介(代理)、房东(真实角色)、租房子(接口或抽象类)；代理的目的就是让真实角色(房东)尽量只做纯粹的事(租房子)，其他的(增加日志、统计、鉴权等)交给代理(中介)去做。

```java
// 1. 定义接口
public interface Rent {
  void rent();
}

// 2. 定义真实角色
public class Host implements Rent {
  @Override
  public void rent() {
    System.out.println("房东出租房子");
  }
}

// 3. 定义代理角色
public class Proxy implements Rent {
  private Host host;

  public Proxy(Host host) {
    this.host = host;
  }

  @Override
  public void rent() {
    seeHouse(); // 中介带你看房子
    host.rent(); // 房东租房子
    fare(); // 中介收中介费
  }

  public void seeHouse() {
    System.out.println("中介带你看房子");
  }

  public void fare() {
    System.out.println("中介收中介费");
  }
}

// 4. 客户操作
public class Client {
  public static void main(String[] args) {
    // 房东要租房子
    Host host = new Host();
    // 代理，中介帮房东租房子
    Proxy proxy = new Proxy(host);
    // 客户找中介租房子，其中附属操作也都由代理完成
    proxy.rent();
    // 结果：
    // 中介带你看房子
    // 房东出租房子
    // 中介收中介费
  }
}
```

### 代理的好处

1. 可以使真实角色(房东)的操作更加纯粹，不用关注一些公共的业务
2. 公共业务交给代理角色(中介)完成，实现了业务的分工
3. 公共业务发生扩展的时候，方便集中管理

### 静态代理的缺点

1. 一个真实角色就会产生一个代理角色，代码量会翻倍，开发效率会降低

### 缺点的解决方案

1. 使用动态代理
2. 使用 AOP(面向切面编程)
