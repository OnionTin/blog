## 注解自动装配

> jdk1.5 开始支持注解，spring2.5 开始支持注解

### 使用注解三步骤

1. 导入注解依赖
2. 在配置文件中开启注解支持
3. 在需要注入的类或属性上添加注解

### 常用注解

| 注解       | 作用                                                                                                                 |
| ---------- | -------------------------------------------------------------------------------------------------------------------- |
| @Autowired | 自动装配，直接在属性上或者是 set 方法上使用，功能同 byName(根据 id 查找，id 不能重复)                                |
| @Qualifier | 指定装配的 bean，功能同 ref                                                                                          |
| @Resource  | 自动装配，直接在属性上或者是 set 方法上使用；先根据 byName，找不到根据 byType(根据 class 查找，使用时指定 name 属性) |
| @Value     | 注入普通属性                                                                                                         |

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd">
  <!--注解的支持-->
  <context:annotation-config />
  <!--配置 bean 文件-->
  <bean id="cat1" class="com.haha.pojo.Cat" />
  <bean id="cat2" class="com.haha.pojo.Cat" />
  <bean id="dog" class="com.haha.pojo.Dog" />
  <bean id="person" class="com.haha.pojo.Person" />
  <bean id="student" class="com.haha.pojo.Student" />
</beans>
```

```java
// Cat
package com.haha.pojo;

public class Cat {
  public void shout()
  {
    System.out.println("miao~");
  }
}
// Dog
package com.haha.pojo;

public class Dog {
  public void shout()
  {
    System.out.println("wang~");
  }
}
```

```java
// Person
package com.haha.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.lang.Nullable;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class Person {
  @Autowired(required = true) // 默认就是true，为false表示这个对象可以为null
  @Qualifier(value = "cat1") // 当Autowired类型冲突时，通过Qualifier指定，value可以省略
  private Cat cat;
  @Autowired
  private Dog dog;
  @Value(value = "李四") // value可以省略
  private String name;

  public Person(@Nullable String name) {
    // @Nullable: 这个注解标示着name可以为null且不会报空指针异常
    this.name = name;
  }
}
```

```java
// Student
package com.haha.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;

import javax.annotation.Resource;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class Student {
  @Value("张三")
  private String name;
  @Resource(name = "cat1")
  private Cat cat;
  @Autowired
  private Dog dog;
}
```
