## 远程配置测试

> 其实 SpringCloudConfig 就是通过服务端去连接远程仓库，并提供可以访问的服务，客户端从服务端获取想要的配置信息并使用。这样就把项目相关的配置，全都放到了远程仓库中，实现了配置的集中管理(分布式项目集群环境下，配置文件的管理尤为重要，所以集中管理配置文件是很有必要的)。当我们修改了远程仓库中的配置后，客户端重新启动就会更换到新的配置。

### 将 7001 服务和 8001 客户端修改成远程仓库配置

#### 1.在父项目中创建两个子模块(project-config-eureka-7001 和 project-config-provider-8001)

#### 2.将 7001 服务和 8001 客户端分别复制到这两个子模块中

#### 3.修改 7001 服务和 8001 客户端的依赖，在原有基础上都加上下边这段依赖就行了

```xml
<!--springcloud-config：客户端-->
<dependency>
  <groupId>org.springframework.cloud</groupId>
  <artifactId>spring-cloud-starter-config</artifactId>
</dependency>
```

#### 4.分别在 7001 服务和 8001 客户端中创建 bootstrap.yml 文件，并添加如下配置

```yml
# 系统级别的配置(比application.yml级别高)
spring:
  cloud:
    config:
      # 从gitee上读取的文件名(不要后缀)
      name: config-7001
      # 使用读取的文件中的哪个环境
      profile: dev
      uri: http://localhost:3344
      # 从哪个分支上获取
      label: master

# 系统级别的配置(比application.yml级别高)
spring:
  cloud:
    config:
      # 从gitee上读取的文件名(不要后缀)
      name: config-8001
      # 使用读取的文件中的哪个环境
      profile: dev
      uri: http://localhost:3344
      # 从哪个分支上获取
      label: master
# 本地自测地址: http://localhost:3344/master/config-8001-dev.yml
```

#### 5.先启动 3344，再分别启动这两个项目

1. 启动 3344 后，启动 7001，访问本地自测地址: http://localhost:3344/master/config-7001-dev.yml [查看信息](http://localhost:3344/master/config-7001-dev.yml)
2. 查看到信息后，访问 localhost:7001 查看是否注册成功
3. 注册成功后，启动 8001，访问本地自测地址: http://localhost:3344/master/config-8001-dev.yml[查看信息](http://localhost:3344/master/config-8001-dev.yml)
4. 查看到信息后，访问 http://localhost:8001/dept/list[查看数据](http://localhost:8001/dept/list)
5. 修改远程仓库中的配置文件，重启相关服务，查看数据是否变化。
