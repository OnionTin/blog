## 静态资源

### 静态资源引入

| 方式      | 文件所在路径         | 优先级 | 一般如何使用 |
| --------- | -------------------- | ------ | ------------ |
| resources | classpath:/resources | 1      | 上传的文件   |
| static    | classpath:/static    | 2      | 静态的图片等 |
| public    | classpath:/public    | 3      | 公共的 js    |
| /         | 项目根目录           | 4      | 一般不使用   |

### webjars 引入

[webjars 官网](https://www.webjars.org/)以依赖的方式引入外部资源，引入的资源在 jar 包内的 classpath:/META-INF/resources 路径下，但是这种方式很少使用

### 修改静态资源路径

因为是自动装配，所以可以修改配置方式修改静态资源的路径，自己来配。

### 源码

```java
// 源码(WebMvcAutoConfiguration.java)截取
public void addResourceHandlers(ResourceHandlerRegistry registry) {
  if (!this.resourceProperties.isAddMappings()) {
    logger.debug("Default resource handling disabled");
  } else {
    if (!registry.hasMappingForPattern("/webjars/**")) {
      ResourceHandlerRegistration registration = registry.addResourceHandler(new String[]{"/webjars/**"}).addResourceLocations(new String[]{"classpath:/META-INF/resources/webjars/"});
      this.configureResourceCaching(registration);
      this.customizeResourceHandlerRegistration(registration);
    }
    String staticPathPattern = this.webFluxProperties.getStaticPathPattern();
    if (!registry.hasMappingForPattern(staticPathPattern)) {
      ResourceHandlerRegistration registration = registry.addResourceHandler(new String[]{staticPathPattern}).addResourceLocations(this.resourceProperties.getStaticLocations());
      this.configureResourceCaching(registration);
      this.customizeResourceHandlerRegistration(registration);
    }
  }
}

// 源码(WebMvcProperties.java)截取
public class WebMvcProperties {
  	/**
	 * Path pattern used for static resources.
	 */
	private String staticPathPattern = "/**";
	private final Async async = new Async();
	private final Servlet servlet = new Servlet();
	private final View view = new View();
	private final Contentnegotiation contentnegotiation = new Contentnegotiation();
	private final Pathmatch pathmatch = new Pathmatch();
}

// 源码(ResourceProperties.java)截取
/**
 * Properties used to configure resource handling.
 *
 * @author Phillip Webb
 * @author Brian Clozel
 * @author Dave Syer
 * @author Venil Noronha
 * @author Kristine Jetzke
 * @since 1.1.0
 */
@ConfigurationProperties(prefix = "spring.resources", ignoreUnknownFields = false)
public class ResourceProperties {
	private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { "classpath:/META-INF/resources/",
			"classpath:/resources/", "classpath:/static/", "classpath:/public/" };
	/**
	 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
	 * /resources/, /static/, /public/].
	 */
	private String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;
	/**
	 * Whether to enable default resource handling.
	 */
	private boolean addMappings = true;
	private final Chain chain = new Chain();
	private final Cache cache = new Cache();
	public String[] getStaticLocations() {
		return this.staticLocations;
	}
}
```
