## 聚合函数

> 注意：
>
> avg() 和 sum()函数中计算时，可能不准确，因为涉及到某个数字可能为 Null，即新增的时候没有给值，所以此时可以用 ifnull()函数来处理。
>
> 还有很多聚合函数，这里只介绍常用的，其他可以自行百度或者查文档。

| 函数                               | 作用                                            |
| ---------------------------------- | ----------------------------------------------- |
| count()                            | 统计数量                                        |
| sum()                              | 求和                                            |
| max()                              | 最大值                                          |
| min()                              | 最小值                                          |
| avg()                              | 平均值                                          |
| truncate(x,y)                      | 保留 y 位小数                                   |
| round(x,y)                         | 保留 y 位小数                                   |
| <font color=red>ifnull(x,y)</font> | <font color=red>如果 x 值为 Null，返回 y</font> |

```sql
-- 查询学生数量
select count(*) from student;

select count(id) from student;

select count(name) as 总的人数 from student;

select count(id) from student where age > 18 and sex = 1;


-- 查询学生年龄总和
select sum(age) from student;

select sum(age)  as 总年龄 from student;

select sum(age)  as 总年龄 from student where sex = 1;


-- 查询学生年龄最大值
select max(age) from student;

select max(age)  as 最大年龄 from student;

select max(age)  as 最大年龄 from student where sex = 1;


-- 查询学生年龄最小值
select min(age) from student;

select min(age)  as 最大年龄 from student where sex = 1;


-- 查询学生年龄平均值
select avg(age)  as 学生平均年龄 from student;

-- 查询学生平均年龄保持两位小数
select truncate(avg(age), 2)  as 学生平均年龄 from student;
select truncate(sum(age)/count(*), 2)  as 学生平均年龄 from student;

-- 查询学生平均年龄保留一位小数
select round(avg(age), 1)  as 学生平均年龄 from student;
select round(sum(age)/count(*), 1)  as 学生平均年龄 from student;


-- 查询学生平均年龄保留一位小数
select round(ifnull(sum(age), 0)/count(*), 1) as 学生平均年龄 from student;
```
