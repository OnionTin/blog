## C3P0

### 使用配置文件的方式

1. 导入 jar 包
2. 导入配置文件
3. 创建数据库连接池对象
4. 获取数据库连接对象
5. 归还连接对象

```java
package com.api.SqlPool;

import com.mchange.v2.c3p0.ComboPooledDataSource;

import javax.sql.DataSource;
import java.sql.Connection;

public class C3p0 {
    public static void main(String[] args) throws Exception {
        /*使用官方配置文件的方式
        1. 导入 jar 包
        2. 导入配置文件
        3. 创建数据库连接池对象
        4. 获取数据库连接对象
        5. 归还连接对象
        */

        // 导入配置文件
        // 创建数据库连接池对象
        // 参数：configName
        DataSource dataSource = new ComboPooledDataSource("c3p0.config");
        // 获取数据库连接对象
        Connection conn = dataSource.getConnection();
        System.out.println("成功获取连接");
        System.out.println(conn);
        // 归还连接对象
        conn.close();
    }
}
```

```xml
<!-- c3p0.config.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<c3p0-config>
    <!--默认配置-->
    <default-config>
        <!--数据库连接参数-->
        <property name="driverClass">com.mysql.cj.jdbc.Driver</property>
        <property name="jdbcUrl">
          jdbc:mysql://localhost:3306/sister?serverTimezone=UTC
        </property>
        <property name="user">root</property>
        <property name="password">Sap@1q2w3e4r</property>
        <!--数据库连接池参数-->
        <property name="checkoutTimeout">3000</property>
        <property name="maxPoolSize">10</property>
        <property name="initialPoolSize">5</property>
    </default-config>
    <named-config name="another">
        <!--数据库连接参数-->
        <property name="driverClass">com.mysql.cj.jdbc.Driver</property>
        <property name="jdbcUrl">
          jdbc:mysql://localhost:3306/sister?serverTimezone=UTC
        </property>
        <property name="user">root</property>
        <property name="password">Sap@1q2w3e4r</property>
        <!--数据库连接池参数-->
        <property name="checkoutTimeout">3000</property>
        <property name="maxPoolSize">10</property>
        <property name="initialPoolSize">5</property>
    </named-config>
</c3p0-config>
```

### 不使用配置文件方式

1. 导入 jar 包
2. 获取数据库连接池对象
3. 配置参数
4. 获取数据库连接对象
5. 归还连接对象

```java
package com.api.SqlPool;

import com.mchange.v2.c3p0.ComboPooledDataSource;

import javax.sql.DataSource;
import java.sql.Connection;

public class C3p0 {
    public static void main(String[] args) throws Exception {
        /*不使用官方配置文件方式
        1. 导入 jar 包
        2. 获取数据库连接池对象
        3. 配置参数
        4. 获取数据库连接对象
        5. 归还连接对象
        */

        // 获取数据库连接池对象（DataSource是父类，不能创建实例）
        // DataSource dataSource = new ComboPooledDataSource();
        ComboPooledDataSource dataSource = new ComboPooledDataSource();
        // 配置参数
        dataSource.setUser("root");
        dataSource.setPassword("Sap@1q2w3e4r");
        dataSource.setJdbcUrl(
          "jdbc:mysql://localhost:3306/sister?serverTimezone=UTC"
        );
        dataSource.setDriverClass("com.mysql.cj.jdbc.Driver");
        // 获取数据库连接对象
        Connection conn = dataSource.getConnection();
        System.out.println(111);
        System.out.println(conn);
        // 归还连接对象
        conn.close();
    }
}
```
