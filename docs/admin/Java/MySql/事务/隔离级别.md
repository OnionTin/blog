## 隔离级别

### 事务的四大特性

原子性(最小的单位，不能再往下分)、持久性、一致性(操作前后是一致的)、隔离性(事务间没有关系，互不影响)

当多个事务，<font color=red>并发</font>操作同一张表时，会打破隔离性，以此产生新的问题(脏读、不可重复读、幻读，幻读也是虚读)

1. 脏读：事务 A 读到了事务 B 未提交的数据

2. 不可重复读：事务 A 读到了事务 B 提交后 修改(update)的 数据

3. 幻读：事务 A 读到了事务 B 提交后 新增(insert)的或减少的 数据

4. 丢失更新：事务 A 更新了事务 B 未提交的数据

### 事务的隔离级别

串行化：事务 A 执行时，事务 B 必须等待事务 A 执行完毕后才能执行；这就比较卡。

| 隔离级别                   | 是否会脏读 | 不可重复读 | 幻读 | 丢失更新 | 默认级别 |
| -------------------------- | ---------- | ---------- | ---- | -------- | -------- |
| 读未提交(read uncommitted) | 是         | 是         | 是   | 是       | ---      |
| 读已提交(read committed)   | 否         | 是         | 是   | 是       | Oracle   |
| 可重复读(repeatable read)  | 否         | 否         | 是   | 是       | MySQL    |
| 串行化(serializable)       | 否         | 否         | 否   | 否       | ---      |

### 设置隔离级别

| 隔离级别相关命令                                 | 作用                   |
| ------------------------------------------------ | ---------------------- |
| select @@tx_isolation                            | 查看当前隔离级别       |
| set global transaction isolation level 隔离级别  | 设置全局的隔离级别     |
| set session transaction isolation level 隔离级别 | 设置当前会话的隔离级别 |
