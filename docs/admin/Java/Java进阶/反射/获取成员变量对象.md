## 获取成员变量对象

成员变量对象的访问权限相关的要求，与<RouteLink to="/admin/Java/Java进阶/反射/获取构造方法.md">构造方法对象</RouteLink>的访问权限相关的要求相同，都涉及到<font color=red>暴力反射</font>相关内容。

### 如何成员变量的对象

获取<font color=red>public</font> 修饰的成员变量对象

| 方法                               | 作用                       |
| ---------------------------------- | -------------------------- |
| public Field getField(String name) | 获取单个成员变量对象       |
| public Field[] getFields()         | 获取所有公共的成员变量对象 |

获取<font color=red>忽略修饰符</font>的成员变量对象

| 方法                                       | 作用                   |
| ------------------------------------------ | ---------------------- |
| public Field getDeclaredField(String name) | 获取单个成员变量对象   |
| public Field[] getDeclaredFields()         | 获取所有的成员变量对象 |

### Field 类中的方法

| 方法                                      | 作用                                                 |
| ----------------------------------------- | ---------------------------------------------------- |
| public void set(Object obj, Object value) | 给某个具体的的实例对象，设置其具体的某个成员变量的值 |
| public Object get(Object obj)             | 获取具体的实例对象的成员变量的值                     |
| public void setAccessible(boolean flag)   | 设置成员变量是否可以访问(true：不校验，false：校验)  |

```java
package com.api.Reflex;

import java.lang.reflect.Field;

public class Demo05 {
    public static void main(String[] args) throws Exception {
        // 获取字节码文件对象
        Class clazz = Class.forName("com.api.Reflex.Dog");

        // 获取 name 的成员变量对象
        Field f_name = clazz.getField("name");

        // 获取 age 的成员变量对象
        Field f_age = clazz.getField("age");

        // 获取 color 的成员变量对象 color不是public修饰的
        Field f_color = clazz.getDeclaredField("color");

        System.out.println(f_name);
        System.out.println(f_age);
        System.out.println(f_color);
        // 结果：
        // public java.lang.String com.api.Reflex.Dog.name
        // public int com.api.Reflex.Dog.age
        // private java.lang.String com.api.Reflex.Dog.color

        Object obj1 = clazz.newInstance();
        Object obj2 = clazz.newInstance();
        // 设置暴力反射
        f_color.setAccessible(true);
        // 给 name 的成员变量对象赋值
        f_name.set(obj1,"淘宝");
        // 给 age 的成员变量对象赋值
        f_age.set(obj1, 3);
        // 给 color 的成员变量对象赋值
        f_color.set(obj1,"黑色");

        f_name.set(obj2,"京东");
        f_age.set(obj2, 2);
        f_color.set(obj2,"红色");

        System.out.println(obj1);
        System.out.println(obj2);
        // 结果：
        // Dog{name='淘宝', age=3, color='黑色'}
        // Dog{name='京东', age=2, color='红色'}

        Object dog1_name = f_name.get(obj1);
        Object dog1_age = f_age.get(obj1);
        Object dog1_color = f_color.get(obj1);

        System.out.println(dog1_name);
        System.out.println(dog1_age);
        System.out.println(dog1_color);
        // 结果：
        // 淘宝
        // 3
        // 黑色
    }
}

class Dog {
    public String name;
    public int age;
    private String color;

    public Dog() {
        System.out.println("空参构造");
    }

    @Override
    public String toString() {
        return "Dog{" +
                "name='" + name + '\'' +
                ", age=" + age +
                ", color='" + color + '\'' +
                '}';
    }
}
```
