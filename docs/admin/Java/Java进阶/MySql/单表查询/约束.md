## 约束

1. 非空约束：不能为空，即 不能为 Null

```sql
-- 格式
create table 表名(
  字段名 数据类型 not null
);

-- 非空约束
create table student{
  name varchar(20) not null,
  age int not null,
  sex varchar(5) not null
}

-- 删除非空约束
alter table 表名 modify 字段名 数据类型;

alter table student modify name varchar(20);

-- 添加非空约束
alter table 表名 modify 字段名 数据类型 not null;

alter table student modify name varchar(20) not null;
```

2. 唯一约束：不能重复(Null 是没有值，没有重不重复这么一说)

```sql
-- 格式
create table 表名(
	字段名 数据类型 unique
);

-- 唯一约束
create table student{
	name varchar(20) unique,
	age int,
	sex varchar(5)
};

-- 删除唯一约束
alter table 表名 drop index 字段名;

alter table student drop index name;

-- 添加唯一约束
alter table 表名 modify 字段名 数据类型 unique;

alter table student modify name varchar(20) unique;

```

3. 主键约束：非空且唯一，每张表只能有一个主键

```sql
-- 格式
create table 表名(
	字段名 数据类型 primary key
);

-- 主键约束
create table student{
	id int primary key,
	name varchar(20),
	age int,
	sex varchar(5)
};

-- 删除主键约束
alter table 表名 drop primary key;

alter table student drop primary key;
-- 删除之后需要再改一下(这个方法就这样)
alter table modify id int;

-- 添加主键约束
alter table 表名 modify 字段名 数据类型 primary key;

alter table student modify id int primary key;
```

4. 主键自增约束：在主键的基础上自动增长，所以也是只能有一个，在上一条的基础上加 1

```sql
-- 格式
create table 表名(
	字段名 数据类型 auto_increment
);

-- 自增约束
create table student{
	id int primary key auto_increment,
	name varchar(20),
	age int,
	sex varchar(5)
};

-- 删除自增约束
alter table 表名 modify 字段名 数据类型;

alter table student modify id int;

-- 添加自增约束
alter table 表名 modify 字段名 数据类型 auto_increment;

alter table student modify id int auto_increment;
```

5. 外键约束

```sql
-- 标准格式
create table 表2名(
	constraint 键名 数据类型 foreign key (外键字段) references 表1名(表1的字段)
);
-- 简化格式(没有给键名，系统默认生成，键名可通过 show create table 表名 查看)
create table 表2名(
  foreign key (外键字段) references 表1名(表1的字段)
);

-- 外键约束
create table user(
  id int primary key,
	name varchar(20)
);
create table student{
	id int primary key,
	name varchar(20),
  uid int,
  constraint stu_user_fk foreign key (uid) references user(id)
};

-- 删除外键约束
alter table 表2名 drop foreign key 外键的名字;

alter table student drop foreign key stu_user_fk;

-- 添加外键约束
alter table 表2名
add constraint 外键的名字 foreign key (外键字段) references 表1名(表1的字段);

alter table student
add constraint stu_user_fk foreign key (uid) references user(id);

-- 注意：添加上外键约束后，想要删除主表是不行的，两种方式删除主表
-- 1. 先删除外键约束，再删除子表
-- 2. 先删除子表，此时因为子表没了那约束自然没了
```
