## 自定义注解

### 自定义注解格式

```java
元注解
修饰符 @interface 注解名字{

}
```

### 最基本的定义使用

```java
package com.api.ZhuJie;

public class Demo01 {
    public static void main(String[] args) {
        A a = new A();
    }
}

@interface MyAnno1 {

}

@MyAnno1
class A {

}
```

### 反编译探索本质

1. 将两个 java 文件(Demo.java A.java)放在同一个文件夹下
2. 在当前文件夹下打开命令行，输入 javac Demo.java A.java
3. 得到三个文件，分别为 Demo.class A.class MyAnno.class
4. 使用 javap MyAnno.class 得到反编译后的文件
5. 观察发现也得到了反编译后的文件内容，这个就是我们要探索的内容
6. 得到内容为：public interface MyAnno1 extends java.lang.annotation.Annotation{}

### 注解的本质

public interface MyAnno1 extends java.lang.annotation.Annotation{}

<font color=red>注解底层就是一个接口，该接口默认继承了 Annotation 接口</font>；所以接口怎么写注解就怎么写

### 注解的属性(就是抽象方法)

在接口中有很多抽象方法，在接口中定义的方法叫抽象方法；在注解中定义的抽象方法，叫做注解的属性。

### 注解属性格式

```java
public @interface MyAnno1 {
  // 抽象方法
  // 返回值数据类型 属性名(参数列表);
  // 返回值数据类型 方法名();
```

返回值数据类型：

1. 基本数据类型
2. String(字符串类型)
3. Class
4. enum
5. Annotation
6. 以及以上所有数据类型的数组类型

### 注解属性的定义与使用

```java
package com.api.ZhuJie;

public class Demo02 {
    public static void main(String[] args) {

    }
}

// 给注解的所有属性都要赋初始值
@MyAnno2(name = "", age = 0, aaa = Enum.MONDAY, bbb = @MyAnno, ccc = {}, getName = "")
class Demo2 {

}
```

```java
// MyAnno2.java
package com.api.ZhuJie;

public @interface MyAnno2 {
    // 看着像是字段，其实都是抽象方法，只不过去掉了abstract
    abstract String name() default "Tom";

    int age() default 20;

    boolean value();

    Enum aaa();

    MyAnno bbb();

    String[] ccc();

    public abstract String getName();
}

enum Enum {
    MONDAY("星期一"), TUESDAY("星期二"), WEDNESDAY("星期三");
    private String name;

    private Enum(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

}

@interface MyAnno {
}
```

### 使用注解的属性注意事项

1. 注解的多个属性之间使用逗号隔开，属性之间的顺序无所谓
2. 注解的属性可以赋默认值(用 default 设置)，如果有了默认值，则使用注解时，属性不需要赋值了
3. 如果注解有，且只有一个属性时，并且属性的名称是 value，则 value 可以省略，直接定义值即可
4. 数组赋值时，值使用 {} 包裹。如果数组中只有一个值，则 {} 可以省略
