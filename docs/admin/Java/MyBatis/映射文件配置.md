## 映射文件配置

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
  配置映射文件的详细信息
  namespace：命名空间，指定具体的某一个抽象接口
-->
<mapper namespace="com.api.MyBatis.dao.UserMapper">
  <!--
    resultMap：配置映射关系，即数据库查出来的字段和实体类属性之间的映射关系
    resultMap：结果会把数据库中的字段映射成实体类属性，所以是实体中的字段
    id：指定映射关系id，也是resultMap的唯一标识
    type：实体类的全限定名(就是返回值类型的设置)
    type：因为配置了namespace所以可以省略，或者因为配置typeAlias可以简写
    type：resultMap具有type属性，sql语句中的type属性可以省略
    resultType：resultType="user"改成resultMap="映射关系id"
    <id>：主键
    <result>：普通字段
    <association>：一对一关系
    <collection>：一对多关系
    <discriminator>：多态映射
    <case>：多态处理
    <otherwise>：多态处理
    column：数据库字段名
    property：实体类属性名
  -->
  <resultMap id="userMap" type="user">
    <!--主键-->
    <id column="id" property="uid" />
    <!--非主键-->
    <result column="name" property="uname" />
  </resultMap>
  <!--
    select：配置查询操作；
    id：指定 UserDao 接口中具体的某一个方法
    resultType：返回值类型，指的是映射文件的返回类型，即映射文件返回的实体类 User；
    resultType：不设置底层自动设置
    parameterType：参数类型；不设置底层自动设置
    是否需要配置参数类型：有参数就配置，不需要参数就不需要配置
    insert：添加
    delete：删除
    update：修改
    select：查询(使用select时不需要手动设置事务提交，查询底层自动提交了)
  -->
  <insert id="add" parameterType="com.api.MyBatis.domain.User">
    insert into user values (null, #{name}, #{age})
  </insert>
  <insert id="addReturnId" parameterType="user">
    <!--
      selectKey：获取自增主键的sql
      keyColumn：表中的字段名
      keyProperty：类中的属性名
      resultType：指定映射文件的返回类型
      order：执行顺序，BEFORE，AFTER：表示执行完sql语句后再执行selectKey语句
    -->
    <selectKey keyColumn="id" keyProperty="id" resultType="int" order="AFTER">
      select last_insert_id()
    </selectKey>
    insert into user values (null, #{name}, #{age})
  </insert>
  <delete id="delete" parameterType="int">
    delete from user where id = #{id}
  </delete>
  <update id="update" parameterType="user">
    update user set name = #{name}, age  = #{age} where id = #{id}
  </update>
  <select id="findAll" resultType="user">
    select * from user
  </select>
  <select id="findById1" resultType="user" parameterType="Integer">
    select * from user where id = #{id}
  </select>
  <!--
    id = ???
    id = Person.getUser().getId()
    id = Person.#{user}.#{id}
    id = #{user.id}
  -->
  <select id="findById2" parameterType="person" resultType="user">
    select * from user where id = #{user.id}
  </select>
  <select id="count" resultType="int">
    select count(*) from user
  </select>
  <select id="findByName1" parameterType="string" resultType="user">
    select * from user where name like #{name}
  </select>
  <select id="findByName2" parameterType="string" resultType="user">
    select * from user where name like '%${value}%'
  </select>
  <select id="findByPage1" parameterType="map" resultType="user">
    select * from user limit #{start},#{size}
  </select>
  <select id="findByPage2" resultType="user">
    select * from user limit #{start},#{size}
  </select>
  <!--sql动态判断：where和id的使用-->
  <select id="findByCondition" parameterType="user" resultType="user">
    select * from user
    <where>
      <if test="name != null">
        and name like #{name}
      </if>
      <if test="age != null &amp;&amp; age != 0">
        and age = #{age}
      </if>
    </where>
  </select>
  <!--sql动态判断：forEach的使用-->
  <select id="findByIds" parameterType="int[]" resultType="user">
    select * from user where id in
    <foreach collection="array" open="(" close=")" separator="," item="id">
      #{id}
    </foreach>
  </select>
</mapper>
```
