## 全局事件总线

使用第三方插件，需要 npm install mitt 全局安装并对外暴漏一个 bus 对象

```ts
//引入mitt插件:mitt一个方法,方法执行会返回bus对象
import mitt from "mitt";
const $bus = mitt();
export default $bus;
```

```vue
<!-- ParentComponent.vue -->
<template>
  <div class="box">
    <h1>全局事件总线$bus</h1>
    <hr />
    <div class="container">
      <Child1></Child1>
      <Child2></Child2>
    </div>
  </div>
</template>

<script setup lang="ts">
//引入子组件
import Child1 from "./Child1.vue";
import Child2 from "./Child2.vue";
</script>

<!-- Child1.vue -->
<template>
  <div class="child1">
    <h3>我是子组件1:曹植</h3>
  </div>
</template>
<script setup lang="ts">
import $bus from "../../bus";
//组合式API函数
import { onMounted } from "vue";
//组件挂载完毕的时候,当前组件绑定一个事件,接受将来兄弟组件传递的数据
onMounted(() => {
  //第一个参数:即为事件类型  第二个参数:即为事件回调
  $bus.on("car", (car) => {
    console.log(car);
  });
});
</script>

<!-- Child2.vue -->
<template>
  <div class="child2">
    <h2>我是子组件2:曹丕</h2>
    <button @click="handler">点击我给兄弟送一台法拉利</button>
  </div>
</template>
<script setup lang="ts">
//引入$bus对象
import $bus from "../../bus";
//点击按钮回调
const handler = () => {
  $bus.emit("car", { car: "法拉利" });
};
</script>
```
