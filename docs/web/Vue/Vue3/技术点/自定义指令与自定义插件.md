## 自定义指令与自定义插件

> 在 Vue 3 中，自定义指令和插件是两种强大的功能，它们可以扩展 Vue 的核心功能，以适应更复杂的场景。自定义指令和插件是 Vue 3 中强大的工具，它们可以帮你构建更加动态和可扩展的应用程序。通过自定义指令，你可以控制 DOM 元素的低级操作；而插件则可以提供全局级别的功能增强。

### 自定义指令

> 自定义指令允许你直接对 DOM 元素进行底层操作，比如监听键盘事件或者控制 DOM 元素的显示/隐藏。

#### 如何定义

在 Vue 3 中，自定义指令应该提供几个生命周期钩子，例如：

- `created`：绑定元素的 attribute 或事件监听器被应用之前调用。
- `beforeMount`：在元素被插入到 DOM 之前调用。
- `mounted`：在绑定元素的父组件和所有子节点都挂载完成后调用。
- `beforeUpdate`：在包含组件的 VNode 更新之前调用。
- `updated`：在包含组件的 VNode 及其子组件的 VNode 更新后调用。
- `beforeUnmount`：在卸载绑定元素的父组件之前调用。
- `unmounted`：当指令与元素解除绑定且父组件已卸载时调用。

```js
const app = Vue.createApp({});

app.directive("focus", {
  mounted(el) {
    el.focus();
  },
});
```

```vue
<!-- 使用 -->
<input v-focus>
```

### 自定义插件

> 自定义插件是 Vue 应用的扩展，它们可以添加全局方法或属性，注册组件，甚至添加全新的指令。

#### 如何定义

> 自定义插件应该有一个 install 方法，这个方法的第一个参数是 Vue 应用实例，第二个参数是一个可选的选项对象。

```js
const myPlugin = {
  install(app, options) {
    app.config.globalProperties.$myGlobalMethod = () => {
      console.log("Hello from my plugin!");
    };
  },
};
```

```js
const app = Vue.createApp({});

app.use(myPlugin);
```

#### 提供/注入 (Provide/Inject)

> 插件也可以使用 provide 和 inject 来向应用提供数据或功能。

```js
app.provide("theme", "dark");
```

```js
const theme = inject("theme");
```
