## 生命周期

> 在 Vue 3 中，组件的生命周期钩子用于在不同阶段执行代码，例如创建、更新、渲染和销毁组件。以下是 Vue 3 中组件生命周期的主要钩子：

### Setup 阶段

- `setup()`：在组件实例创建之前执行，用于声明响应式数据和计算属性。

### 创建阶段

- `beforeCreate()`：在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用。
- `created()`：在实例创建完成后被调用，此时实例已完成数据观测、属性和方法的运算，但挂载阶段还未开始，`$el` 属性还未显示出来。

### 装载阶段

- `beforeMount()`：在挂载开始之前被调用：相关的`render`函数首次被调用。
- `onBeforeMount()`：一个`onMounted`的别名，在挂载开始之前被调用。
- `mounted()`：在`el`被新创建的`vm.$el`替换后调用，可以执行 DOM 操作。

### 更新阶段

- `beforeUpdate()`：在数据变化之后，DOM 被重新渲染之前调用，此时可以在这个钩子中进一步地更改状态。
- `updated()`：在由于数据更改导致的虚拟 DOM 重新渲染和打补丁之后被调用。

### 渲染阶段

- `render()`：Vue 3 中的渲染函数，用于手动编写模板渲染逻辑。

### 销毁阶段

- `beforeUnmount()`：在卸载开始之前被调用。
- `unmounted()`：在组件卸载之后调用。

### 异步操作

- `onBeforeUnmount()`：在组件卸载之前被调用。
- `onUnmounted()`：在组件卸载之后被调用。

### 错误处理

- `onErrorCaptured()`：当捕获一个来自子孙组件的错误时被调用。
- `onRenderTracked()`：当依赖项被追踪时触发。
- `onRenderTriggered()`：当依赖项触发重新渲染时触发。

### 示例

```vue
<script setup>
import { onMounted, onUnmounted } from "vue";

onMounted(() => {
  console.log("组件已挂载");
});

onUnmounted(() => {
  console.log("组件已卸载");
});
</script>
```

### 注意事项

1. 生命周期钩子在 setup() 函数中通过 onXXX 的形式注册。
2. setup() 阶段是 Composition API 的入口，它在组件实例创建之前执行。
3. created 和 mounted 钩子在服务器端渲染 (SSR) 时只调用一次。
