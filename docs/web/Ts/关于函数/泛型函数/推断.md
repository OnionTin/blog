## 推断

> 泛型推断是指编译器根据上下文环境自动确定泛型参数类型的过程。这使得开发者在调用泛型函数或构造泛型类型时，不必显式指定泛型参数，从而简化了代码。

### 泛型推断的基本例子

> 在这个例子中，即使没有显式指定泛型参数，TypeScript 编译器也能够根据传递给 identity 函数的参数类型，推断出 T 应该是 number 类型或 string 类型。

```ts
function identity<T>(arg: T): T {
  return arg;
}

const result = identity(42); // TypeScript 推断 T 为 number
const strResult = identity("Hello, World!"); // TypeScript 推断 T 为 string
```

### 泛型推断在对象中的应用

```ts
function createObject<T>(key: T, value: T): { [K in T]: T } {
  return { [key]: value };
}

const obj = createObject("key", "value"); // TypeScript 推断 T 为 string
```

### 泛型类中的推断

```ts
class GenericClass<T> {
  value: T;

  constructor(value: T) {
    this.value = value;
  }

  getValue(): T {
    return this.value;
  }
}

const genericObj = new GenericClass(123); // TypeScript 推断 T 为 number
const genericStrObj = new GenericClass("Hello"); // TypeScript 推断 T 为 string
```

### 泛型约束与推断

> 泛型约束可以用来限制泛型参数的类型，同时也可以影响泛型推断

```ts
interface Lengthwise {
  length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
  // Now we know it has a .length property, no more error
  console.log(arg.length);
  return arg;
}
// TypeScript 推断 T 为 string
const result = loggingIdentity("Hello, World!");
// Error: number does not satisfy the 'Lengthwise' constraint
const noResult = loggingIdentity(42);
```
