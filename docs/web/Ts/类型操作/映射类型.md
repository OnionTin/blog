### 映射类型

> 映射类型（Mapped Types）是一种强大的类型构造功能，它允许你根据一个现有类型创建一个新的类型，并且可以为它的属性执行一个映射函数。这在处理具有相同类型属性的对象或数组时特别有用。

### 基本语法

> T 是一个类型，P 是 T 的属性键的联合。对于 T 的每个属性 P，映射类型会创建一个同名的属性，其类型为 T[P]。

```ts
type MappedType<T> = {
  [P in keyof T]?: T[P];
};
```

### 可选属性映射

> Partial&lt;T&gt; 是一个映射类型，它将 T 的每个属性 P 转换为可选属性。

```ts
type Partial<T> = {
  [P in keyof T]?: T[P];
};

type PartialPoint = Partial<{ x: number; y: number }>;
// { x?: number; y?: number }
```

### 只读属性映射

```ts
type Readonly<T> = {
  readonly [P in keyof T]: T[P];
};

type ReadonlyPoint = Readonly<{ x: number; y: number }>;
// { readonly x: number; readonly y: number }
```

### 转换属性类型

> 将所有属性转换为数组类型。

```ts
type Arrayify<T> = {
  [P in keyof T]: T[P][];
};

type ArrayifiedPoint = Arrayify<{ x: number; y: number }>;
// { x: number[]; y: number[] }
```

### 条件属性映射

> RenameProps 是一个映射类型，它不仅映射了属性，还根据第二个泛型参数 S 重命名了属性。

```ts
type RenameProps<T, S> = {
  [P in keyof T as S[P]]: T[P];
};

type RenamedPoint = RenameProps<{ x: number; y: number }, { x: "X"; y: "Y" }>;
// { X: number; Y: number }
```

### 使用 as 进行类型断言

> 映射类型中的 as 关键字可以用来进行类型断言，这在处理类型转换时非常有用。

```ts
type BoxedValue<T> = {
  [P in keyof T]: { value: T[P] };
};

type BoxedPoint = BoxedValue<{ x: number; y: number }>;
// { x: { value: number }; y: { value: number } }
```

### 注意事项

1. 映射类型中的 in 语法用于遍历一个类型的属性键。
2. 映射类型可以有条件地使用 ? 来标记属性为可选。
3. readonly 可以用于使属性只读。
4. 映射类型可以与泛型结合使用，以创建更通用的类型构造函数。
