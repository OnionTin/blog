## 条件类型

> 条件类型（Conditional Types）是一种高级类型功能，它允许你基于表达式的值来选择不同的类型。条件类型在编译时评估，并根据条件表达式的结果选择一个类型。

```ts
// 条件类型的一般形式如下：
type MyType = T extends U ? X : Y;
// 这里，T extends U ? X : Y 是一个条件类型表达式，它表示：
// 如果类型 T 扩展（或符合）类型 U，则结果是类型 X。
// 否则，结果是类型 Y
```

### 基本用法

> IsNumber&lt;T&gt; 是一个条件类型，它检查 T 是否为 number 类型。如果是，结果是 "Yes"；如果不是，结果是 "No"。

```ts
type IsNumber<T> = T extends number ? "Yes" : "No";

type IsNumberResult1 = IsNumber<42>; // "Yes"
type IsNumberResult2 = IsNumber<string>; // "No"
```

### 嵌套条件类型

```ts
type IsArray<T> = T extends any[] ? "Array" : "Not Array";

type IsNumberArray = IsArray<number[]>; // "Array"
type IsStringArray = IsArray<string[]>; // "Array"
type IsBooleanArray = IsArray<boolean[]>; // "Array"
type IsObjectArray = IsArray<{ a: number }[]>; // "Array"
type IsNumber = IsArray<number>; // "Not Array"
```

### 使用条件类型进行类型守卫

```ts
type IsStringOrNumber<T> = T extends string
  ? "String"
  : T extends number
  ? "Number"
  : "Other";

type Result1 = IsStringOrNumber<string>; // "String"
type Result2 = IsStringOrNumber<number>; // "Number"
type Result3 = IsStringOrNumber<boolean>; // "Other"
```

### 条件类型的分配行为

```ts
type Primitive = number | string | boolean;

type IsPrimitiveType<T> = T extends Primitive ? T : never;

type IsStringOrNumberOrBoolean = IsPrimitiveType<string | number | boolean>;
// string | number | boolean
```

### 使用条件类型简化类型定义

```ts
type OptionalKeys<T> = {
  [K in keyof T]?: T[K];
};

type MakeOptional<T, K extends keyof T> = Omit<T, K> & { [P in K]?: T[P] };

type Todo = {
  title: string;
  description?: string;
  completed: boolean;
};

type TodoPreview = MakeOptional<Todo, "description">;
// { title: string; completed: boolean; description?: string; }
```
