## 类型断言(慎用,避免破坏类型安全)

> 类型断言（Type Assertions）是一种告诉编译器你比它更了解某个变量的类型的机制。类型断言可以用来手动指定编译器可能不确定的变量的类型

### 类型断言的基本语法

```ts
const myCanvas = document.getElementById("main_canvas") as HTMLCanvasElement;
```

### <>语法

```ts
const myCanvas = <HTMLCanvasElement>document.getElementById("main_canvas");
```

### 使用场景

> 类型断言通常用在以下场景：
>
> 1.  当你知道编译器是错误的时候：有时候，你可能比编译器更了解某个函数的返回值。
>
> 2.  当你想要绕过编译器的类型检查时：有时候，你可能想要执行一些不安全的类型操作。
>
> 3.  与第三方库交互时：当使用 TypeScript 与 JavaScript 库时，你可能需要告诉编译器某个值的确切类型。

#### 示例

```ts
let someValue: any = "this is a string";

// 告诉 TypeScript 我们知道 someValue 是一个字符串
let strLength: number = (someValue as string).length;
```

### 与接口一起使用

> 我们通过类型断言来确定 pet 的具体类型，然后调用相应的方法

```ts
interface Bird {
  fly(): void;
  layEggs(): void;
}

interface Fish {
  swim(): void;
  layEggs(): void;
}

function getSmallPet(): Bird | Fish {
  // ...
}

const pet = getSmallPet();
if (pet.swim) {
  (pet as Fish).swim();
} else {
  (pet as Bird).fly();
}
```

### 断言一个变量为 any 类型

> 当你从 JavaScript 代码迁移到 TypeScript 时，或者当你处理一个大型代码库中的遗留代码时，你可能会遇到 any 类型。类型断言可以用来将 any 类型变量断言为更具体的类型,在这个例子中，我们将 any 类型的 value 断言为 string 类型，然后安全地访问其 length 属性。

```ts
let value: any = "Hello";
let length: number = (value as string).length;
```

### 断言函数返回值类型

> 我们断言 getContent 函数的返回值为 string 类型

```ts
function getContent(): any {
  // ...
}

let content: string = getContent() as string;
```

### 非空断言运算符(后缀！)

```ts
function liveDangerously(x?: number | null) {
  // No error
  console.log(x!.toFixed());
}
```
