<!-- @format -->

## 组合 vs 继承

在 React 中，组合和继承是两种不同的组件复用方式。React 团队推荐使用组合而不是继承来构建应用程序，因为组合提供了更好的灵活性和可维护性。总的来说，组合提供了一种更灵活、更可维护的方式来构建 React 应用程序，而继承则在某些特定场景下可能有其优势。

### 继承

在传统的 OOP（面向对象编程）中，继承是一种常见的代码复用方式。通过创建一个新类并继承父类的属性和方法，可以扩展功能。在 React 中，继承通常意味着一个组件通过`extends`关键字继承另一个组件。

```jsx
class ChildComponent extends React.Component {
  render() {
    return <div>{this.props.message}</div>;
  }
}
```

**继承的缺点**：

1. **紧密耦合**：子组件和父组件紧密耦合，父组件的更改可能影响子组件。
2. **复用受限**：只能继承一个父组件，限制了复用性。
3. **生命周期方法**：在类组件中，生命周期方法和属性是固定的，这限制了组件的灵活性。
4. **理解复杂度**：继承关系可能导致组件之间的依赖关系变得复杂，难以理解。

### 组合

组合是将多个小组件组合成一个大组件的方式。在 React 中，组件可以像函数一样相互调用并返回 JSX。

```jsx
function ParentComponent() {
  return (
    <div>
      <ChildComponentA />
      <ChildComponentB />
    </div>
  );
}

function ChildComponentA() {
  return <div>Child A</div>;
}

function ChildComponentB() {
  return <div>Child B</div>;
}
```

**组合的优点**：

1. **灵活性**：可以灵活地组合不同的组件，创建复杂的 UI。
2. **可维护性**：每个组件都是独立的，易于维护和测试。
3. **复用性**：组件可以在不同的父组件中复用，提高了代码的复用性。
4. **简洁性**：组合可以减少模板代码，使组件更加简洁。

### React 推荐组合的原因

1. **更少的假设**：组合不假设组件之间的关系，提供了更大的灵活性。
2. **更好的复用性**：组件可以在不同的上下文中复用，而不受限制。
3. **更清晰的结构**：组合可以创建更清晰的组件结构，易于理解和维护。
4. **避免生命周期问题**：组合避免了复杂的生命周期方法和属性继承问题。

### 结合使用

虽然 React 推荐组合，但这并不意味着继承完全不能用。在某些情况下，继承仍然有其用途，例如当你需要复用多个组件的属性和方法时。你可以将组合和继承结合使用，以满足不同的需求。

### 最佳实践

- **优先使用组合**：在大多数情况下，组合是构建 React 应用程序的首选方式。
- **合理使用继承**：在确实需要复用多个组件的属性和方法时，可以考虑使用继承。
- **保持组件独立**：无论使用组合还是继承，都应该保持组件的独立性和可复用性。
- **避免深层次的继承链**：深层次的继承链会使代码难以理解和维护。
